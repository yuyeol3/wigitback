## 개요

WIGIT은 Git을 기반으로 문서의 버전 관리를 수행하는 간단한 위키 프로그램입니다. 사용자는 문서를 추가, 편집, 삭제할 수 있으며, 이미지 업로드 기능도 제공합니다. 모든 문서는 Git을 통해 관리되며, 이를 통해 변경 사항의 추적이 가능합니다.

### 주요 기능

- **문서 관리**: 문서를 추가, 편집, 삭제할 수 있으며, Git을 통해 버전 관리를 지원합니다.
- **이미지 관리**: 이미지를 업로드, 삭제, 조회할 수 있습니다.
- **Git 통합**: 모든 문서 변경 사항은 Git 커밋을 통해 관리되며, 문서 히스토리와 버전 관리 기능을 제공합니다.
- **간단한 인증 시스템**: Flask-Login을 사용해 사용자 인증 기능을 제공합니다.

## 프로젝트 구조

```
.
├── init.py               # Flask 앱 초기화 및 사용자 인증 설정
├── login.py              # 사용자 로그인 및 로그아웃 관리
├── main.py               # 문서 및 이미지 API의 주요 라우트 정의
├── model_user.py         # 사용자 모델, 사용자 관련 작업 및 인증 처리
├── db.py                 # SQLite 데이터베이스 연결 및 초기화 (사용자 관리용)
├── documents.py          # 문서 작업 처리 함수 (추가, 편집, 조회 등)
├── images.py             # 이미지 작업 처리 함수 (업로드, 삭제, 조회 등)
├── funcs.py              # 파일 작업을 위한 유틸리티 함수
├── str_consts.py         # 응답 메시지를 위한 문자열 상수
├── assets/               # 정적 파일 (CSS, JS, 이미지 등)
└── templates/            # HTML 템플릿 렌더링 뷰
```

## 시작하기

### 사전 준비 사항

- Python 3.8 이상
- Flask
- Flask-Login
- SQLite
- Git
- PIL (Pillow)
- bcrypt

### 설치 방법

1. 저장소를 클론합니다:
   ```bash
   git clone https://github.com/yuyeol3/wigit.git
   cd wigit
   ```

2. 가상 환경을 설정합니다:
   ```bash
   python3 -m venv venv
   source venv/bin/activate  # Windows에서는 `venv\Scripts\activate` 사용
   ```

3. 필요한 패키지를 설치합니다:
   ```bash
   pip install -r requirements.txt
   ```

4. 데이터베이스를 초기화합니다:
   ```bash
   python -c "from db import init_db; init_db()"
   ```

5. 환경 변수를 설정합니다:
   - Flask 세션을 위한 `SECRET_KEY`를 설정합니다 (`os.urandom(24)`로 생성 가능).

6. 애플리케이션을 실행합니다:
   ```bash
   python main.py
   ```

### 애플리케이션 실행

애플리케이션은 기본적으로 `http://localhost:5000`에서 실행됩니다. 실행 후 사용자는 문서를 추가하고 편집할 수 있으며, Git을 통해 각 문서의 변경 사항을 추적할 수 있습니다.

### 주요 엔드포인트

- **로그인/로그아웃:**
  - `POST /login`: 사용자를 로그인합니다.
  - `GET /logout`: 사용자를 로그아웃합니다.
  
- **문서 API:**
  - `GET /getdoc/<doc_name>&<doc_hash>`: 문서를 이름과 해시로 가져옵니다.
  - `POST /adddoc/<doc_name>`: 새 문서를 추가합니다.
  - `POST /editdoc/<doc_name>`: 기존 문서를 편집합니다.
  - `POST /deletedoc/<doc_name>`: 문서를 삭제합니다.
  - `GET /gethistory/<doc_name>&<start>&<end>`: 문서 히스토리를 가져옵니다.

- **이미지 API:**
  - `POST /addimage/<image_name>`: 새 이미지를 업로드합니다.
  - `GET /deleteimage/<image_name>`: 이미지를 삭제합니다.
  - `GET /getimage/<image_name>`: 이미지를 가져옵니다.



## 주요 기능 설명

### 문서 관리

- **문서 추가**: 새 문서를 생성하고, Git 저장소에 커밋합니다.
- **문서 편집**: 기존 문서를 편집하고, 변경 사항을 Git에 반영합니다. 브랜치를 사용하여 안전하게 편집 작업을 진행합니다.
- **문서 삭제**: 문서를 삭제하고, Git 기록에 반영합니다.
- **문서 히스토리 조회**: 각 문서의 변경 내역을 Git 기록을 통해 조회할 수 있습니다.

### 이미지 관리

- **이미지 업로드**: PNG, JPEG, GIF 등 다양한 이미지 파일을 업로드할 수 있습니다.
- **이미지 삭제**: 업로드된 이미지를 삭제할 수 있습니다.
- **이미지 조회**: 저장된 이미지를 조회할 수 있습니다.

### 사용자 인증

Flask-Login을 사용하여 간단한 로그인 및 로그아웃 기능을 제공합니다. 비밀번호는 bcrypt를 사용해 해시 처리되며, 사용자 정보는 SQLite 데이터베이스에 저장됩니다.

## 기술적 세부 사항

- **Git 통합**: 문서의 모든 변경 사항은 Git 저장소에 커밋되며, 이를 통해 문서의 히스토리 추적이 가능합니다.
- **Flask 기반**: Flask 프레임워크를 사용해 서버를 구축했으며, 사용자의 요청에 따라 문서 및 이미지 작업을 처리합니다.
- **데이터베이스**: SQLite를 사용하여 사용자 및 문서 리디렉션 정보를 관리합니다.
- **에러 처리**: 에러 발생 시 사전에 정의된 문자열 상수를 통해 일관된 응답 메시지를 제공합니다.

## 기여하기

이 프로젝트에 기여하고 싶다면 이슈를 생성하거나 풀 리퀘스트를 제출해 주세요.

### 라이선스

이 프로젝트는 MIT 라이선스로 제공됩니다. 자세한 내용은 [LICENSE](LICENSE) 파일을 참조하세요.
